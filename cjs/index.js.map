{"version":3,"file":"index.js","names":["_xss","_interopRequireDefault","require","_setCookieParser","_camelCase","_capitalize","_isEmpty","obj","__esModule","default","CONSTANTS","exports","LOWER_CASE","UPPER_CASE","HEXADECIMAL","NUMBERS","Exception","message","response","name","ExceptionClass","Error","constructor","status","pascalCase","time","Math","floor","Date","now","sleepMs","milliseconds","Promise","resolve","setTimeout","sleep","seconds","promiseTimeout","promise","reject","timer","then","value","clearTimeout","catch","reason","splitClear","rawText","separator","split","map","item","trim","filter","isEmpty","findKeyNode","key","node","pair","hasOwnProperty","index","result","checkEmpty","upperCaseFirst","str","length","toUpperCase","slice","lowerCaseFirst","toLowerCase","camelCase","titleCase","word","capitalize","join","objectStringify","toString","String","limitString","limit","omission","substring","safeString","xss","whiteList","stripIgnoreTag","stripIgnoreTagBody","randomString","useNumbers","useUppercase","characters","i","randomIndex","random","randomHex","randomInteger","min","max","callback","minNotSpecified","isSync","randomNumber","randomUuid","useDashes","d","uuid","replace","c","r","replaceAll","randomWeighted","dict","randomFunc","totalWeight","elements","Object","keys","weights","values","reduce","sum","weight","randomNum","weightSum","cookieDict","res","decodeValues","cookies","setCookieParser","parse","cookie","cookieHeader","entries","isIntlHttpCode","httpCode","undefined","isIntlError","e","includes"],"sources":["../src/index.js"],"sourcesContent":["import xss from \"xss\";\r\nimport setCookieParser from \"set-cookie-parser\";\r\nimport camelCase from \"lodash/camelCase.js\";\r\nimport capitalize from \"lodash/capitalize.js\";\r\nimport isEmpty from \"lodash/isEmpty.js\";\r\n\r\n\r\nexport const CONSTANTS = {\r\n    LOWER_CASE: \"abcdefghijklmnopqrstuvwxyz\",\r\n    UPPER_CASE: \"ABCDEFGHIJKLMNOPQRSTUVWXYZ\",\r\n    HEXADECIMAL: \"0123456789abcdef\",\r\n    NUMBERS: \"0123456789\",\r\n};\r\n\r\nexport function Exception(message, response = {}, name = null) {\r\n    class ExceptionClass extends Error {\r\n        constructor(message, response, name) {\r\n            super(message);\r\n            response.status = response.status || 400;\r\n            this.response = response;\r\n            this.name = name ? pascalCase(name) : \"Exception\";\r\n        }\r\n    }\r\n\r\n    return new ExceptionClass(message, response, name);\r\n}\r\n\r\nexport function time() {\r\n    return Math.floor(Date.now() / 1000);\r\n}\r\n\r\nexport async function sleepMs(milliseconds) {\r\n    return new Promise(resolve => setTimeout(resolve, milliseconds));\r\n}\r\n\r\nexport async function sleep(seconds) {\r\n    return await sleepMs(seconds * 1000);\r\n}\r\n\r\nexport function promiseTimeout(milliseconds, promise) {\r\n    return new Promise((resolve, reject) => {\r\n        const timer = setTimeout(() => {\r\n            reject(new Error('Promise timed out after ' + milliseconds + 'ms'));\r\n        }, milliseconds);\r\n\r\n        promise\r\n            .then(value => {\r\n                clearTimeout(timer);\r\n                resolve(value);\r\n            })\r\n            .catch(reason => {\r\n                clearTimeout(timer);\r\n                reject(reason);\r\n            });\r\n    });\r\n}\r\n\r\nexport function splitClear(rawText, separator = /\\r?\\n/) {\r\n    return rawText.split(separator).map(item => item.trim()).filter(item => !isEmpty(item));\r\n}\r\n\r\nexport function findKeyNode(key, node, pair = null) {\r\n    if (node && node.hasOwnProperty(key) && (pair ? node[key] === pair : true)) {\r\n        return node;\r\n    } else if (typeof node === 'object') {\r\n        for (let index in node) {\r\n            const result = findKeyNode(key, node[index], pair);\r\n            if (result) {\r\n                return result;\r\n            }\r\n        }\r\n    }\r\n    return null;\r\n}\r\n\r\nexport function checkEmpty(value) {\r\n    if (typeof value === \"number\") {\r\n        return value === 0;\r\n    } else {\r\n        return isEmpty(value);\r\n    }\r\n}\r\n\r\nexport function upperCaseFirst(str) {\r\n    str = str || \"\";\r\n    if (str.length < 1)\r\n        return \"\";\r\n    return str[0].toUpperCase() + str.slice(1);\r\n}\r\n\r\nexport function lowerCaseFirst(str) {\r\n    str = str || \"\";\r\n    if (str.length < 1)\r\n        return \"\";\r\n    return str[0].toLowerCase() + str.slice(1);\r\n}\r\n\r\nexport function pascalCase(str) {\r\n    return upperCaseFirst(camelCase(str));\r\n}\r\n\r\nexport function titleCase(str) {\r\n    str = str || \"\";\r\n    return str\r\n        .split(' ')\r\n        .map(word => capitalize(word))\r\n        .join(' ');\r\n}\r\n\r\nexport function objectStringify(obj) {\r\n    for (let key in obj) {\r\n        if (obj.hasOwnProperty(key)) {\r\n            if (typeof obj[key] === 'object' && obj[key] !== null) {\r\n                objectStringify(obj[key]);\r\n            } else {\r\n                if (obj[key]?.toString) {\r\n                    obj[key] = obj[key].toString();\r\n                } else {\r\n                    obj[key] = String(obj[key]);\r\n                }\r\n            }\r\n        }\r\n    }\r\n    return obj;\r\n}\r\n\r\nexport function limitString(str, limit = 35, omission = \"...\") {\r\n    str = str || \"\";\r\n    if (str.length <= limit) {\r\n        return str;\r\n    } else {\r\n        return str.substring(0, limit - omission.length) + omission;\r\n    }\r\n}\r\n\r\nexport function safeString(str) {\r\n    str = str || \"\";\r\n    return xss(str, {\r\n        whiteList: {},\r\n        stripIgnoreTag: true,\r\n        stripIgnoreTagBody: [\"script\"]\r\n    });\r\n}\r\n\r\nexport function randomString(length, useNumbers = true, useUppercase = false) {\r\n\r\n    let characters = CONSTANTS.LOWER_CASE;\r\n    if (useUppercase) characters += CONSTANTS.UPPER_CASE;\r\n    if (useNumbers) characters += CONSTANTS.NUMBERS;\r\n\r\n    let randomString = '';\r\n    for (let i = 0; i < length; i++) {\r\n        const randomIndex = Math.floor(Math.random() * characters.length);\r\n        randomString += characters[randomIndex];\r\n    }\r\n\r\n    return randomString;\r\n}\r\n\r\nexport function randomHex(length) {\r\n    let result = '';\r\n    for (let i = 0; i < length; i++) {\r\n        const randomIndex = Math.floor(Math.random() * CONSTANTS.HEXADECIMAL.length);\r\n        result += CONSTANTS.HEXADECIMAL[randomIndex];\r\n    }\r\n\r\n    return result;\r\n}\r\n\r\nexport function randomInteger(min, max, callback) {\r\n    const minNotSpecified = typeof max === 'undefined' || typeof max === 'function';\r\n\r\n    if (minNotSpecified) {\r\n        callback = max;\r\n        max = min;\r\n        min = 0;\r\n    }\r\n\r\n    const isSync = typeof callback === 'undefined';\r\n\r\n    if (typeof min !== 'number' || typeof max !== 'number') {\r\n        throw new Error('min and max must be numerical values');\r\n    }\r\n    if (max <= min) {\r\n        throw new Error('max must be greater than min');\r\n    }\r\n\r\n    const randomNumber = Math.floor(Math.random() * (max - min)) + min;\r\n\r\n    if (isSync) {\r\n        return randomNumber;\r\n    } else {\r\n        if (typeof callback !== 'function') {\r\n            throw new Error('callback must be a function');\r\n        }\r\n        callback(randomNumber);\r\n    }\r\n}\r\n\r\nexport function randomUuid(useDashes = true) {\r\n    let d = Date.now();\r\n    const uuid = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\r\n        const r = (d + Math.random() * 16) % 16 | 0;\r\n        d = Math.floor(d / 16);\r\n        return (c === 'x' ? r : (r & 0x3 | 0x8)).toString(16);\r\n    });\r\n    return useDashes ? uuid : uuid.replaceAll(\"-\", \"\");\r\n}\r\n\r\nexport function randomWeighted(dict, randomFunc = (totalWeight) => Math.random() * totalWeight) {\r\n    let elements = Object.keys(dict);\r\n    let weights = Object.values(dict);\r\n\r\n    let totalWeight = weights.reduce((sum, weight) => sum + weight, 0);\r\n\r\n    let randomNum = randomFunc(totalWeight);\r\n    let weightSum = 0;\r\n\r\n    for (let i = 0; i < elements.length; i++) {\r\n        weightSum += weights[i];\r\n        if (randomNum <= weightSum) {\r\n            return elements[i];\r\n        }\r\n    }\r\n}\r\n\r\nexport function cookieDict(res, decodeValues = false) {\r\n    let dict = {};\r\n    const cookies = setCookieParser.parse(res, {decodeValues: decodeValues});\r\n    for (let cookie of cookies) {\r\n        dict[cookie.name] = cookie.value;\r\n    }\r\n    return dict;\r\n}\r\n\r\nexport function cookieHeader(cookieDict) {\r\n    return Object.entries(cookieDict)\r\n        .map(([key, value]) => `${key}=${value}`)\r\n        .join(';')\r\n}\r\n\r\nexport function isIntlHttpCode(httpCode) {\r\n    return (\r\n        httpCode === undefined ||\r\n        httpCode === null ||\r\n        httpCode === 0 ||\r\n        httpCode === 100 ||\r\n        httpCode === 402 ||\r\n        httpCode === 407 ||\r\n        (460 <= httpCode && httpCode < 470) ||\r\n        500 <= httpCode\r\n    );\r\n}\r\n\r\nexport function isIntlError(e) {\r\n    return (\r\n        e?.message?.toLowerCase?.()?.includes?.(\"timeout\") ||\r\n        e?.message?.toLowerCase?.()?.includes?.(\"aborted\") ||\r\n        e?.message?.toLowerCase?.()?.includes?.(\"tls connection\") ||\r\n        e?.message?.toLowerCase?.()?.includes?.(\"socket hang\") ||\r\n        isIntlHttpCode(e?.response?.status)\r\n    )\r\n}"],"mappings":"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"}